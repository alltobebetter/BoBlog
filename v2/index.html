<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MDUI 项目</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@1.0.1/dist/css/mdui.min.css">
    <style>
        /* 自定义样式 */
        .dark-mode {
            background-color: #333;
            color: #fff;
        }
    </style>
</head>
<body class="mdui-theme-primary-indigo mdui-theme-accent-pink">

    <!-- 顶部菜单 -->
    <div class="mdui-appbar mdui-appbar-fixed">
        <div class="mdui-toolbar mdui-color-white">
            <a href="javascript:;" class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#drawer'}">
                <i class="mdui-icon material-icons">menu</i>
            </a>
            <span class="mdui-typo-title">项目标题</span>
            <div class="mdui-toolbar-spacer"></div>
            <button class="mdui-btn mdui-btn-icon" onclick="toggleDarkMode()">
                <i class="mdui-icon material-icons">brightness_4</i>
            </button>
        </div>
    </div>

    <!-- 侧边栏 -->
    <div class="mdui-drawer" id="drawer">
        <ul class="mdui-list" id="menu-list">
            <!-- 菜单项将由JavaScript动态生成 -->
        </ul>
    </div>

    <!-- 内容区域 -->
    <div class="mdui-container">
        <div id="content">
            <!-- 卡片内容将由JavaScript动态生成 -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/mdui@1.0.1/dist/js/mdui.min.js"></script>
    <script>
        // 读取并解析 sidebar.md
        fetch('sidebar.md')
            .then(response => response.text())
            .then(text => {
                const lines = text.split('\n');
                const menuList = document.getElementById('menu-list');
                const content = document.getElementById('content');

                lines.forEach(line => {
                    if (line.trim()) {
                        const [icon, name, path] = line.match(/\[(.*?)\]/g).map(s => s.slice(1, -1));
                        const listItem = document.createElement('li');
                        listItem.className = 'mdui-list-item mdui-ripple';
                        listItem.innerHTML = `<i class="mdui-list-item-icon mdui-icon material-icons">${icon}</i>
                                              <div class="mdui-list-item-content">${name}</div>`;
                        listItem.onclick = () => loadContent(path);
                        menuList.appendChild(listItem);
                    }
                });
            });

        // 加载并显示内容
        function loadContent(path) {
            fetch(path)
                .then(response => response.text())
                .then(markdown => {
                    const card = document.createElement('div');
                    card.className = 'mdui-card mdui-m-y-2';
                    card.innerHTML = `<div class="mdui-card-content">${markdown}</div>`;
                    content.innerHTML = '';
                    content.appendChild(card);
                });
        }

        // 切换黑白模式
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }
    </script>
</body>
</html>
